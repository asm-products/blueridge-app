<div id="app-profile" class="container app-container">
    <div ng-include src="'/views/app/sections/nav.html'"></div>
    <div class="panel">                     
        <h2 class="lead">Hey {{user.fullname.first}},</h2>
        <p class="lead"> You are about to change your subscription to </p> 
        <div ng-include src="'/views/app/sections/go-'+cart.plan+'.html'"></div>
        
        <div ng-if="needsPayment()">
            <h5>Payment Method:</h5>
            <div ng-if="paymentMethodIsSet()">            
                <p><strong>{{subscription.payment.card.type}}</strong> ending in <strong>{{subscription.payment.card.last4}}</strong>, expires <strong>{{subscription.payment.card.exp_month}}/{{subscription.payment.card.exp_year}}</strong></p>            
            </div>
            <button ng-if="!paymentMethodIsSet()" class="btn btn-mini btn-success btn-purchase" stripe="stripe" callback="addPayment(token)">Add Payment Method</button>
        </div>
        <hr />
        <button class="btn btn-large btn-success" type="submit" ng-disabled="!paymentMethodIsSet()" ng-click="updateSubscription()">Change Plan</button>
        <a class="btn btn-link" ng-href="/app/profile">Nevermind, cancel changes</a>
    </div>

    {{subscription}}
    <div ng-include src="'/views/app/sections/footer.html'"></div>
</div>
